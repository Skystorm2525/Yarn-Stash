{% extends "base.html" %}

{% block content %}

<style>
.pattern-detail-pdf-preview {
    width: 100%;
    height: 80vh;
    border: none;
}

.pattern-detail-image {
    width: 100%;
    max-height: 80vh;
    object-fit: contain;
}
</style>

<div class="pattern-detail-container">

    <div class="pattern-detail-card">

        <!-- Preview -->
        <div class="pattern-preview-wrapper">

            {% if pattern['file_name'].endswith('.pdf') %}

                <iframe src="{{ url_for('uploaded_file', filename=pattern['file_name']) }}"
                        class="pattern-detail-pdf-preview">
                </iframe>

            {% elif pattern['file_name'].endswith(('.png', '.jpg', '.jpeg', '.webp')) %}

                <img src="{{ url_for('uploaded_file', filename=pattern['file_name']) }}"
                     alt="Pattern Preview"
                     class="pattern-detail-image">

            {% else %}

                <p>No preview available</p>

            {% endif %}

        </div>

        <!-- Info -->
        <div class="pattern-detail-info">

            <h1 class="pattern-detail-title">
                {{ pattern['name'] }}
            </h1>

            <p class="pattern-detail-folder">
                <strong>Folder:</strong>
                {{ pattern['folder_name'] if pattern['folder_name'] else "Uncategorized" }}
            </p>

            <div class="pattern-detail-actions">

                <a href="/patterns/download/{{ pattern['id'] }}"
                   class="primary-btn">
                    Download
                </a>

                <form action="/patterns/delete/{{ pattern['id'] }}"
                      method="POST"
                      onsubmit="return confirm('Delete this pattern?');">

                    <button type="submit"
                            class="delete-btn">
                        Delete Pattern
                    </button>

                </form>

            </div>

        </div>

    </div>

</div>

{% endblock %}